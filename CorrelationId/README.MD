# Correlation ID Generator

## What is a correlation ID?
A correlation ID is not an error number or code. It has no specific meaning. It is just an identifier that is automatically generated for each request received by a server.

As the message moves through the nodes of the system, each log entry that is made contains the correlation ID. As the request moves through the system, the correlation id is logged where one would normally log. When an error occurs, the correlation ID can be returned as part of the error message. With the given correlation ID, administrators can follow 'the trail of breadcrumbs' left behind by the request and reconstruct the events that led to the error.

A correlation ID does not give one and indication of went wrong, but it does help to discover what went wrong.

## Won't any old number do?
It might if your system hardly receives any request.

The value of correlation IDs lies in the fact that they are unique. If the same correlation ID gets generated for different requests, the integrity of the breadcrumb trail falls to pieces.

Let's assume that we decide to use an unsigned integer as a correlation ID. In C#, an unsigned integer consists of 32 bits. That gives us 4,294,967,295 possible values.

That is a lot, isn't it? Surely 4 billion requests should be more than enough for our a system, and even if a duplicate occurs we can still use the date as well, right?
Enter [The Birthday Problem](https://en.wikipedia.org/wiki/Birthday_problem). This means that using a 32-bit unsigned integer, we can only generate 77164 IDs before there is a 50% probability that a duplicate ID was generated. This isn't enough for even a humble system.

What about a 64 bit unsigned long? That gives us a whopping 18,446,744,073,709,551,615 unique IDs. We will have to generate 5,056,937,542 IDs before there is a 50% probability of generating a duplicate. We can still do better...

## OK, a GUID then...
Now you've got it. How many unique IDs can be generated by using a GUID? There are [about 7Ã—1022 stars in the universe](https://en.wikipedia.org/wiki/Observable_universe#Matter_content). If we want to exhaust all the available GUIDs we will need to assign roughly 5 quadrillion GUIDs for every star.

Here is the thing about GUIDs. If you want to textually represent a GUID, you need at least 32 bytes. If we save our correlation ID as text, it would quickly add up and fill our available disk space. So what can we do?

## Ascii85 encoding
Using [Ascii85 encoding](https://en.wikipedia.org/wiki/Ascii85), we can represent a GUID textually using 20 bytes. This saves 12 bytes per ID.

This gives us the uniqueness of a GUID but allows us to save a few bytes.

## About the class
The class is not intended to be an Ascii85 encoder/decoder. It is used purely for generating a GUID and returning the encoded representation of it. Since all the parameters are well defined, no error checking takes place. It doesn't do much, but what it does works.
